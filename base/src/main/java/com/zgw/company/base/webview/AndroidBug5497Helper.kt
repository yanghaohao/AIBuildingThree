package com.zgw.company.base.webviewimport android.app.Activityimport android.graphics.Rectimport android.view.Viewimport android.widget.FrameLayoutclass AndroidBug5497Helper private constructor(activity: Activity) {  private val mChildOfContent: View  private var usableHeightPrevious: Int = 0  private val frameLayoutParams: FrameLayout.LayoutParams  private var layoutParamsHeight: Int = 0  init {    val content = activity.findViewById<View>(android.R.id.content) as FrameLayout    mChildOfContent = content.getChildAt(0)    mChildOfContent.viewTreeObserver.addOnGlobalLayoutListener { possiblyResizeChildOfContent() }    frameLayoutParams = mChildOfContent.layoutParams as FrameLayout.LayoutParams    layoutParamsHeight = frameLayoutParams.height  }  private fun possiblyResizeChildOfContent() {    val usableHeightNow = computeUsableHeight()    if (usableHeightNow != usableHeightPrevious) {      val contentHeight = mChildOfContent.rootView.height      val heightDifference = contentHeight - usableHeightNow      if (heightDifference > contentHeight / 4) {        frameLayoutParams.height = contentHeight - heightDifference      } else {        frameLayoutParams.height = layoutParamsHeight      }      mChildOfContent.requestLayout()      usableHeightPrevious = usableHeightNow    }  }  private fun computeUsableHeight(): Int {    val r = Rect()    mChildOfContent.getWindowVisibleDisplayFrame(r)    return r.bottom - r.top  }  companion object {    fun assistActivity(activity: Activity) {      AndroidBug5497Helper(activity)    }  }}